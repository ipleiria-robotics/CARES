# ORBSLAM3 dockerfile
A dockerfile for ORBSLAM3 with VNC to access desktop interface.
The VNC connection is not encrypted by default.

# Building the image

Clone this repo and ensure "entrypoint.sh" is executable:
```bash
chmod +x ./entrypoint.sh
```
Then build the image:
```bash
docker build -t orbslam3 -f ./Dockerfile .
```
To create the container:
```bash
docker run -p 6080:80 --shm-size=512m orbslam3
```
The container will be active right away. Use a web browser to connect to VNC. The IP address is displayed on the container details when you run:
```bash
docker ps -a
```
Once the VNC window loads, just click "connect".

# Running ORBSLAM3

Through VNC, open a terminal, go to catkin_ws, source the workspace and launch ORBSLAM3:
```bash
cd catkin_ws
source devel/setup.sh
roslaunch orb_slam3_ros <launch file>
```
Replace `<launch file>` with the desired launch file.

No dataset is download automatically. You can use firefox to download or wget.
```bash
cd ~/Downloads
wget https://researchdata.ntu.edu.sg/api/access/datafile/68132
unzip 68132
```
If you face issues with wget, try running with `sudo`.

# Cleaning storage used by docker

If you want to clear all storage used by docker, first remove any existing containers:
```bash
docker ps- a
docker rm ID
```
Where ID is the "CONTAINER ID". Then, remove the image:
```bash
docker images
docker rmi REPOSITORY
```
Where REPOSITORY is the image name. 

Afterwards, to delete all contents generated by every image:
```bash
docker system prune
```
If you just want to delete contents related to a specific docker, refer to the [official Docker documentation](https://docs.docker.com/engine/manage-resources/pruning/).

# Common issues

If you cant run any **docker** command, you may not be on the same usergroup as docker. To solve this just [add user to docker group](https://www.configserverfirewall.com/ubuntu-linux/add-user-to-docker-group-ubuntu/).

# License
The files named "Dockerfile" and "entrypoint.sh" present on the same folder as this text file, are released under the Apache License 2.0, see [LICENSE](https://github.com/ipleiria-robotics/CARES/blob/main/SLAM_algorithms/orb_slam3_ros/Docker/LICENSE).

### Acknowledgements

* This Dockerfile is based on [Tiryoh/docker-ros-desktop-vnc](https://github.com/Tiryoh/docker-ros-desktop-vnc/tree/master), licensed under the [Apache License 2.0](https://github.com/Tiryoh/docker-ros-desktop-vnc/blob/master/LICENSE).
* This Docker image is based on [dorowu/ubuntu-desktop-lxde-vnc](https://github.com/fcwu/docker-ubuntu-vnc-desktop), licensed under the [Apache License 2.0](https://github.com/fcwu/docker-ubuntu-vnc-desktop/blob/60f9ae18e71e9fabbfb23f67b212e64ab72c206e/LICENSE).
